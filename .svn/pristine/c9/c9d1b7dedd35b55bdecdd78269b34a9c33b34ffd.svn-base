package com.example.tingpan.grpproject;

import android.content.Context;
import android.content.SharedPreferences;

/**
 * Created by TingPan on 3/10/15.
 */
public class NodePreference {
    private SharedPreferences sharedPref;
    private static final NodePreference nodePreference = new NodePreference();
    private int portNumber;
    private int maxConnection;
    private static Context appContext;
    private static final String TAG = "com.serveIt.app";
    private static final String PORT_KEY = "com.serveIt.app.portNum";
    private static final String MAX_KEY = "com.serveIt.app.maxNum";

    public static NodePreference getInstance(){
        return nodePreference;
    }
    private NodePreference() {
        appContext = SplashActivity.getContext();
        sharedPref = appContext.getApplicationContext().getSharedPreferences(TAG, Context.MODE_PRIVATE);
        portNumber = sharedPref.getInt(PORT_KEY, 3000);
        maxConnection = sharedPref.getInt(MAX_KEY, 10);
    }



    public int getPortNumber() {
        return portNumber;
    }

    public boolean setPortNumber(int portNumber) {
        boolean result = false;
        if (portNumber >= 5000 && portNumber <= 65535) {
            this.portNumber = portNumber;
            SharedPreferences.Editor editor = sharedPref.edit();
            editor.putInt(PORT_KEY, portNumber);
            editor.commit();
            result = true;
        }
        return result;
    }

    public int getMaxConnection() {
        return maxConnection;
    }

    public boolean setMaxConnection(int maxConnection) {
        boolean result = false;
        if (maxConnection >= 1 && maxConnection <= 1000) {
            this.maxConnection = maxConnection;
            SharedPreferences.Editor editor = sharedPref.edit();
            editor.putInt(MAX_KEY, maxConnection);
            editor.commit();
            result = true;
        }
        return result;
    }
}
